# 5. Docker

# Day42. The big picture: Container

- ë„ì»¤ë€? â†’ `í”„ë¡œì„¸ìŠ¤ë¥¼ ê²©ë¦¬`
    
    ì¶”ìƒí™” ë° OS ë ˆë²¨ì˜ ê°€ìƒí™” ìë™í™” ê³„ì¸µ (abstraction and automation layer)ë¥¼ ì œê³µí•˜ì—¬ ì»¨í…Œì´ë„ˆì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬ë¥¼ ìë™í™”í•œë‹¤.
    
- ì¥ì 
    - **ì¢…ì†ì„±ì´ ìˆëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì„ ìœ„í•œ í‘œì¤€í™”ëœ ë‹¨ìœ„ë¡œ íŒ¨í‚¤ì§• ê°€ëŠ¥**
    - VMê³¼ ë‹¬ë¦¬ ì»¨í…Œì´ë„ˆëŠ” ì˜¤ë²„í—¤ë“œê°€ ë†’ì§€ ì•ŠìŒ â†’ ë¦¬ì†ŒìŠ¤ë¥¼ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥
- ì»¨í…Œì´ë„ˆë€?
    - VM : ê²ŒìŠ¤íŠ¸ OSê°€ ì‚¬ìš©í•  HW ê°€ìƒí™”ì— ì†Œë¹„ë˜ëŠ” computational overheadê°€ í¬ë‹¤. í˜¸ìŠ¤íŠ¸ OS ìœ„ì— ê²ŒìŠ¤íŠ¸ OS ë‚´ì—ì„œ ì•± ì‹¤í–‰, ì „ì²´ í”„ë¡œì„¸ìŠ¤ ê²©ë¦¬
    - ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‰½ê³  ì¼ê´€ë˜ê²Œ ë°°í¬ ê°€ëŠ¥ â†’ `ì´ì‹ì„±`
        - ë„ì»¤ ì´ë¯¸ì§€ ì œê³µ
        - How? ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¶”ìƒí™”í•  ìˆ˜ ìˆëŠ” ë…¼ë¦¬ì  íŒ¨í‚¤ì§• ë©”ì»¤ë‹ˆì¦˜ ì œê³µ - ë¶„ë¦¬ .. !
- *Docker Daemon*Â - Docker ì»¨í…Œì´ë„ˆ ë¹Œë“œ, ì‹¤í–‰ ë° ë°°í¬ë¥¼ ê´€ë¦¬í•˜ëŠ” í˜¸ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ë˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.Â ë°ëª¬ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ëŒ€í™”í•˜ëŠ” ìš´ì˜ ì²´ì œì—ì„œ ì‹¤í–‰ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤.
- ì»¨í…Œì´ë„ˆëŠ” ë‚´ë¶€ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ ì»¨í…Œì´ë„ˆì˜ ìƒíƒœë„ ì‹¤í–‰ ì¤‘ì´ ëœë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ë©´ ì»¨í…Œì´ë„ˆì˜ ìƒíƒœë„ `Existed`ê°€ ëœë‹¤. ì¢…ë£Œëœ ì»¨í…Œì´ë„ˆëŠ” CPU ìì›ì´ë‚˜ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

- ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
    - ì»¨í…Œì´ë„ˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ í™˜ê²½ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¶”ìƒí™”í•  ìˆ˜ ìˆëŠ” `Logical Packaging Mechanism`ì„ ì œê³µí•œë‹¤. ì´ë¥¼ í†µí•´ ê°œë°œ í™˜ê²½ì— êµ¬ì•  ë°›ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‰½ê³  ì¼ê´€ë˜ê²Œ ë°°í¬í•  ìˆ˜ ìˆë‹¤.

> **íŒ¨í‚¤ì§•, Packaging**
> ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤í–‰ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬(Library, Libs), ë°”ì´ë„ˆë¦¬ (Binary, Bins), ê¸°íƒ€ êµ¬ì„± íŒŒì¼ ë“±ì„ íŒ¨í‚¤ì§€ë¡œ **ë¬¶ì–´ì„œ ë°°í¬**í•˜ëŠ” ë°©ì‹.
> 
>  ë”°ë¼ì„œ êµ¬ë™í™˜ê²½ì´ ë°”ë€Œì–´ë„ ì‹¤í–‰ì— í•„ìš”í•œ íŒŒì¼ë“¤ì„ ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ê¸°ë•Œë¬¸ì— ì˜¤ë¥˜ë¥¼ ìµœì†Œí™”í•  ìˆ˜ ìˆë‹¤.
> 

# Day43. Docker ì„¤ì¹˜

OCI: ë²¤ë” ì¢…ì†ì˜ ìœ„í—˜ì„ í”¼í•˜ë©´ì„œ í˜ì‹ ì„ ì¥ë ¤í•˜ëŠ” ì‚°ì—… í‘œì¤€ ì¡°ì§

> dockerëŠ” ì»¨í…Œì´ë„ˆë¥¼ ë¹Œë“œ, ì‹¤í–‰ ë° ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì†Œí”„íŠ¸ì›¨ì–´ í”„ë ˆì„ì›Œí¬
> 

- docker engine (https://docs.docker.com/engine/)

Docker Engineì€ í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì‘ë™
ì¥ê¸° ì‹¤í–‰ ë°ëª¬ í”„ë¡œì„¸ìŠ¤ì¸ dockerdê°€ ìˆëŠ” ì„œë²„.
APIëŠ” í”„ë¡œê·¸ë¨ì´ Docker ë°ëª¬ê³¼ ëŒ€í™”í•˜ê³  ì§€ì‹œí•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
ì»¤ë§¨ë“œë¼ì¸ ì¸í„°í˜ì´ìŠ¤(CLI) í´ë¼ì´ì–¸íŠ¸ dockerì…ë‹ˆë‹¤.

# Day44. Docker Desktop

Environments íƒ­ë„ ìˆëŠ”ë°, ì´ íƒ­ì€ ë‹¤ë¥¸ git branch ì‚¬ì´ë¥¼ ì´ë™í•˜ì§€ ì•Šê³  íŒ€ê³¼ í˜‘ì—…í•˜ëŠ” ë° ë„ì›€ì´ ë  ê²ƒì´ë‹¤.

# Day45. Docker ì´ë¯¸ì§€ì˜ êµ¬ì¡°

Docker Imageë¥¼ êµ¬ì„±í•˜ëŠ” ê° íŒŒì¼ì€ ë ˆì´ì–´ë¼ê³  í•œë‹¤. Dockerê°€ ì´ë¯¸ì§€ì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ê²½ìš°ë§ˆë‹¤(ì–´ì œ ì‹¤í–‰í•œ ê²ƒì²˜ëŸ¼), ì»¨í…Œì´ë„ˆ ë ˆì´ì–´ë¼ê³  í•˜ëŠ” ì“°ê¸° ê°€ëŠ¥í•œ ë ˆì´ì–´ê°€ ì¶”ê°€ëœë‹¤. 

# Day46. Docker Compose

- ComposeëŠ” ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ Docker ì•±ì„ ì‰½ê²Œ ì •ì˜í•˜ê³  ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë„êµ¬

# Day47. Docker ë„¤íŠ¸ì›Œí‚¹ ë° ë³´ì•ˆ
- ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•  ë•Œë§ˆë‹¤ **í˜¸ìŠ¤íŠ¸ì— `veth(Virtual Ethernet)`**ì´ë¼ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±, ì´ëŠ” **ë„ì»¤ ì—”ì§„ì´ ìë™ìœ¼ë¡œ ìƒì„±**í•¨
- ë„ì»¤ëŠ” ê° ì»¨í…Œì´ë„ˆì— ì™¸ë¶€ì™€ì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ì»¨í…Œì´ë„ˆë§ˆë‹¤ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ í˜¸ìŠ¤íŠ¸ì— ìƒì„±í•˜ë©°, ì´ ì¸í„°í˜ì´ìŠ¤ì˜ ì´ë¦„ì´ `veth`ë¡œ ì‹œì‘
- `veth` ì¸í„°í˜ì´ìŠ¤ëŠ” í˜¸ìŠ¤íŠ¸ê°€ ê°–ê³  ìˆëŠ” `eth0`, `eth1` ë“±ê³¼ ì—°ê²°
- `**docker0` ë¸Œë¦¬ì§€**ëŠ” ê° `veth` ì¸í„°í˜ì´ìŠ¤ì™€ `ë°”ì¸ë”©`ë˜ì–´ í˜¸ìŠ¤íŠ¸ì˜ `eth0` ì¸í„°í˜ì´ìŠ¤ì™€ ì´ì–´ì£¼ëŠ” ì—­í• 
- ë„¤íŠ¸ì›Œí¬ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ì§€ ì•Šê³  Docker ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•˜ë©´ ê¸°ë³¸ ê°’ì¸ â€˜bridgeâ€™ë¥¼ ë„¤íŠ¸ì›Œí¬ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹œì‘í•œë‹¤.
- ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì™¸ë¶€ì— ë…¸ì¶œí•˜ê¸° ìœ„í•´ì„œëŠ” **eth0ì˜ IPì™€ í¬íŠ¸**ë¥¼ **í˜¸ìŠ¤íŠ¸ì˜ IPì™€ í¬íŠ¸**ë¡œ ë°”ì¸ë”©í•´ì•¼ í•œë‹¤.

# Day48. Dockerì˜ ëŒ€ì•ˆ

- Podman (https://anfrhrl5555.tistory.com/191)
    - podmanì»¨í…Œì´ë„ˆ ì‘ì—…ì„ ìœ„í•œ ì˜¤í”ˆ ì†ŒìŠ¤ Linux ë„êµ¬
    - Dockerì™€ ë‹¬ë¦¬ Daemonì´ ì¡´ì¬í•˜ì§€ ì•Šê³ , ì»¤ë§¨ë“œë¡œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¡œë¶€í„° ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì™€ ì €ì¥í•˜ê³ , í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•œë‹¤. ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ Podman ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì»¨í…Œì´ë„ˆ ê°„ì— ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/9f25870f-f390-4f70-a124-ef604fe567f7/d1108b2b-0901-48ca-87c7-45896fe04743/Untitled.png)

- LXC
- Containerd

---

# 6. Kubernetes

### Kubernetes ì‹œë¦¬ì¦ˆì—ì„œ ë‹¤ë£° ë‚´ìš©

- Kubernetes ì•„í‚¤í…ì²˜
- Kubectl ì»¤ë§¨ë“œ
- Kubernetes YAML
- Kubernetes Ingress
- Kubernetes Services
- Helm íŒ¨í‚¤ì§€ ê´€ë¦¬ì
- ì˜ì†ì„± ìŠ¤í† ë¦¬ì§€
- stateful ì•±

# Day49. Kubernetes ê°œìš”

`declarative model` `desired state`

[](https://blog.devgenius.io/kubernetes-d51c3ba54ce1)

[ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œì‘í•˜ê¸° - Kubernetesë€ ë¬´ì—‡ì¸ê°€?](https://subicura.com/2019/05/19/kubernetes-basic-1.html)

ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ì¸ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ **ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì„œë¹„ìŠ¤ì˜ ë¶€í•˜ì— ë”°ë¼ ìë™í™”ëœ ë°©ì‹ìœ¼ë¡œ í™•ì¥ ë° ì¶•ì†Œ**í•  ìˆ˜ ìˆë‹¤.

### ì¿ ë²„ë„¤í‹°ìŠ¤ ì´ì 

Service discovery & Load Balancing : k8sëŠ” DNS ì´ë¦„ ë˜ëŠ” IP ì£¼ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ë…¸ì¶œí•  ìˆ˜ ìˆë‹¤. ì»¨í…Œì´ë„ˆì— ëŒ€í•œ íŠ¸ë˜í”½ì´ ë§ì„ ê²½ìš°, ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ë¡œë“œë°¸ëŸ°ì‹±í•˜ê³  ë¶„ì‚°í•˜ì—¬ ë°°í¬ê°€ ì•ˆì •ì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ë„ë¡ í•  ìˆ˜ ìˆë‹¤. 

Storage Orchestration : ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë° í¼ë¸”ë¦­ í´ë¼ìš°ë“œ í”„ë¡œë°”ì´ë” ë“± ì›í•˜ëŠ” ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œì„ ìë™ìœ¼ë¡œ ë§ˆìš´íŠ¸í•  ìˆ˜ ìˆë‹¤.

ìë™í™”ëœ ë¡¤ì•„ì›ƒ ë° ë¡¤ë°± : ë°°í¬ëœ ì»¨í…Œì´ë„ˆì˜ `desired state`ë¥¼ ëª…ì‹œí•  ìˆ˜ ìˆê³ , ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì‚¬ìš©ìê°€ ì‘ì„±í•œ ìƒíƒœë¥¼ ê³„ì† ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ì¡°ì¹˜ë¥¼ ì·¨í•œë‹¤. 

ìë™ bin íŒ¨í‚¹

ìê°€ ë³µêµ¬ : ì»¨í…Œì´ë„ˆê°€ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš° ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ê³ , ë…¸ë“œê°€ ì£½ìœ¼ë©´ ë‹¤ë¥¸ ë…¸ë“œì— ì»¨í…Œì´ë„ˆë¥¼ ë³µì œí•˜ê³  ì˜ˆì•½í•œë‹¤. ì»¨í…Œì´ë„ˆê°€ ìˆ˜ë™ ë˜ëŠ” ìë™ ìƒíƒœí™•ì¸ì— ì‘ë‹µí•˜ì§€ ì•Šìœ¼ë©´ ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œí•œë‹¤.

secret ë° config map ê´€ë¦¬: Secretì€ ë¹„ë°€ë²ˆí˜¸ ë“±ê³¼ ê°™ì€ ë°ì´í„°ë¥¼ ì €ì¥, configëŠ” êµ¬ì„± íŒŒì¼ ë“±ì„ ì €ì¥í•œë‹¤. ì´ ê°’ë“¤ì€ ETCDì— ì €ì¥ëœë‹¤. 

### Control Plane êµ¬ì„±ìš”ì†Œ

Control Planeì˜ êµ¬ì„±ìš”ì†Œë“¤ì€ í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ì „ì—­ ê²°ì •(ex. ìŠ¤ì¼€ì¤„ë§)ì„ ë‚´ë¦¬ê³ , í´ëŸ¬ìŠ¤í„° ì´ë²¤íŠ¸ë¥¼ ê°ì§€ ë° ì‘ë‹µí•œë‹¤.

![image](https://github.com/cloud-club/90DaysOfDevOps/assets/45191069/bf803b54-adbe-4c8e-9cda-08a2d714d301)

- kube-apiserver
    - `kubectl` ë°  ë‚´ë¶€ ë¦¬ì†ŒìŠ¤ì˜ ìš”ì²­ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê³ , ì²˜ë¦¬
    - ETCDì™€ í†µì‹ í•˜ëŠ” ìœ ì¼í•œ ì˜¤ë¸Œì íŠ¸
- kube-scheduler
    - Podë¥¼ í• ë‹¹í•  Woker Nodeë¥¼ ì„ íƒ
- kube-controller-manager
    - ë‹¤ì–‘í•œ ì»¨íŠ¸ë¡¤ëŸ¬(ë³µì œ/ë°°í¬/ìƒíƒœ ë“±)ì„ ê´€ë¦¬
- etcd
    - í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ë°ì´í„°ë¥¼ ë‹´ëŠ” key-value ì €ì¥ì†Œ

### Nodeì˜ êµ¬ì„±ìš”ì†Œ

![image](https://github.com/cloud-club/90DaysOfDevOps/assets/45191069/75df8aee-f2c2-40e0-aa6e-96a9a444d8ec)

- kubelet
    - ë…¸ë“œì— í• ë‹¹ëœ Podì˜ ìƒëª… ì£¼ê¸°ë¥¼ ê´€ë¦¬í•œë‹¤. Podë¥¼ ìƒì„±í•˜ê³  Pod ì•ˆì˜ ì»¨í…Œì´ë„ˆì— ì´ìƒì´ ì—†ëŠ”ì§€ í™•ì¸í•˜ë©´ì„œ ì£¼ê¸°ì ìœ¼ë¡œ ë§ˆìŠ¤í„°ì— ìƒíƒœë¥¼ ì „ë‹¬í•œë‹¤.
    - ì»¨í…Œì´ë„ˆ ì—”ì§„ì€ ì œì–´í•˜ëŠ” ì£¼ì²´ì´ë‹¤.
- kube-proxy
    - Podë¡œ ì—°ê²°ë˜ëŠ” **ë„¤íŠ¸ì›Œí¬ë¥¼ ê´€ë¦¬**í•œë‹¤. ëª¨ë“  worker nodeëŠ” ì„œë¹„ìŠ¤ ë° ì—”ë“œí¬ì¸íŠ¸ì˜ ì¶”ê°€/ì œê±°ë¥¼ ìœ„í•´ master nodeì˜ api ì„œë²„ë¥¼ ê°ì‹œí•˜ëŠ” kube-proxyë¼ëŠ” ë°ëª¬ì„ ì‹¤í–‰í•œë‹¤. iptablesì— ë“±ë¡ëœ ê·œì¹™ì´ ë§ì•„ì§€ë©´ì„œ ìµœê·¼ì— IPVSë¥¼ ì§€ì›í•˜ê¸° ì‹œì‘í–ˆë‹¤.
- container runtime
    - ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ì»¨í…Œì´ë„ˆ ì‹¤í–‰í™˜ê²½ ex. Docker, Containerd, cri-o ë“± CRI ê·œê²©ì„ ë”°ë¥´ë©´ ê°€ëŠ¥

> **Desired State**
> 
> 
> k8sëŠ” ì›í•˜ëŠ” ìƒíƒœë¥¼ ê³„ì† ì²´í¬í•˜ê³  ë¬¸ì œê°€ ìˆë‹¤ë©´ ìë™ìœ¼ë¡œ ì¡°ì¹˜ë¥¼ ì·¨í•œë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ `etcd`ì— ìˆëŠ” ë°ì´í„°ê°€ ë³€ê²½ë˜ë©´ ê°ì§€í•˜ì—¬ desired stateì™€ ë‹¬ë¼ì§„ ì ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
> 
> `ìƒíƒœ ì²´í¬ -> ì°¨ì´ì  ë°œê²¬ -> ì¡°ì¹˜`
> 
> ![image](https://github.com/cloud-club/90DaysOfDevOps/assets/45191069/9e76b201-7047-4e61-a438-b2ba027d7e0a)

> 

> **ìë™ bin íŒ¨í‚¹**
k8s ì—”ì§„ì´ ê° ì»¨í…Œì´ë„ˆì˜ CPU, ë©”ëª¨ë¦¬(RAM) ìš”êµ¬ ì‚¬í•­ì„ ê¸°ë°˜ìœ¼ë¡œ ì„œë²„ ë‚´ë¶€ì˜ ì»¨í…Œì´ë„ˆë¥¼ ìë™ìœ¼ë¡œ ë˜í•‘í•˜ì—¬ ì‹¤í–‰ì„ ìš©ì´í•˜ê²Œ í•˜ëŠ” ê°€ëŠ¥ì´ë‹¤.
> 

# Day50. K8S í”Œë«í¼ ì„ íƒí•˜ê¸°

> k8së¥¼ ì´ìš©í•˜ëŠ” ë°ì— ë„ì „ ê³¼ì œ ì¤‘ í•˜ë‚˜ëŠ” ë³µì¡ì„±ì„ ì œê±°í•˜ëŠ” ê²ƒì´ë‹¤.
> 

- ë² ì–´ë©”íƒˆ í´ëŸ¬ìŠ¤í„°
    - ì—¬ëŸ¬ ëŒ€ì˜ ë¬¼ë¦¬ì  ì„œë²„ì—ì„œ Linux OS ì‹¤í–‰
- ê°€ìƒí™”
    - ê°€ìƒ ë¨¸ì‹ 
- ë¡œì»¬ ë°ìŠ¤í¬í†± ì˜µì…˜
    - Minikube
        - ë¬´ì–¸ê°€ë¥¼ ì‹œì‘í•˜ê³  ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì„ ë°”ê¾¸ëŠ” ëª‡ ê°€ì§€ í›Œë¥­í•œ ê¸°ëŠ¥ê³¼ ì• ë“œì˜¨ì´ ìˆë‹¤.
- Kubernetes Managed Service
    - í¼ë¸”ë¦­ í´ë¼ìš°ë“œë¥¼ í™œìš©í•œ ë°©ì•ˆ (AWS EKS, GKE, AKS ë“±)
    - ëŒ€ê·œëª¨ í•˜ì´í¼ìŠ¤ì¼€ì¼ëŸ¬ ë¿ë§Œ ì•„ë‹ˆë¼ ìµœì¢… ì‚¬ìš©ìê°€ ê´€ë¦¬ ë° ì œì–´ ê³„ì¸µì„(ì»¨íŠ¸ë¡¤ í”Œë ˆì¸)ì„ ì‹ ê²½ì“°ì§€ ì•Šê³  MSPì—ì„œ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤

ì´ì™¸ì—ë„ Red hatì˜ OpenShiftê°€ ì¡´ì¬í•œë‹¤.

# Day51. ì²« ë²ˆì§¸ k8s í´ëŸ¬ìŠ¤í„° ë°°í¬í•˜ê¸°

- arkadeë¡œ minikube, kubectl ì„¤ì¹˜í•˜ì—¬ k8s í´ëŸ¬ìŠ¤í„° êµ¬ì„±

<aside>
ğŸ’¡ arkade https://github.com/alexellis/arkade

Kubernetesì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” 120ê°œ ì´ìƒì˜ CLIì™€ 55ê°œ ì´ìƒì˜ Kubernetes ì•±ì„ ìœ„í•œ ë§ˆì¼“í”Œë ˆì´ìŠ¤

![image](https://github.com/cloud-club/90DaysOfDevOps/assets/45191069/096d3f88-2425-4d72-8d8e-318df0133a3c)

</aside>

- Minikubeì˜ addons list í™•ì¸ â†’ Helmì„ ì´ìš©í•˜ë©´ ë” ê°„ë‹¨í•˜ê²Œ ë°°í¬ ê°€ëŠ¥
    - `CSI-hostpath-driver`
    - `volumesnapshots`
    
    ```bash
    $ minikube addons list
    |-----------------------------|----------|--------------|--------------------------------|
    |         ADDON NAME          | PROFILE  |    STATUS    |           MAINTAINER           |
    |-----------------------------|----------|--------------|--------------------------------|
    | ambassador                  | minikube | disabled     | third-party (ambassador)       |
    | auto-pause                  | minikube | disabled     | google                         |
    | csi-hostpath-driver         | minikube | disabled     | kubernetes                     |
    | dashboard                   | minikube | disabled     | kubernetes                     |
    ...ìƒëµ...
    
    | volumesnapshots             | minikube | disabled     | kubernetes                     |
    |-----------------------------|----------|--------------|--------------------------------|
    ```
    

- addons ì •ì˜í•˜ì—¬ minikube ì‹œì‘í•˜ê¸°
    - container-runtime: docker(default), cri-o, containerd
    - p, --profile: The name of the minikube VM being used. This can be set to allow having multiple instances of minikube independently.
    
    ```bash
    minikube start --addons volumesnapshots,csi-hostpath-driver --apiserver-port=6443 --container-runtime=containerd -p yr-demo --kubernetes-version=1.21.2
    ```
    
    ```bash
    ğŸ”  Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸...
        â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
        â–ª Using image k8s.gcr.io/sig-storage/hostpathplugin:v1.6.0
        â–ª Using image k8s.gcr.io/sig-storage/csi-resizer:v1.1.0
        â–ª Using image k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.0.1
        â–ª Using image k8s.gcr.io/sig-storage/snapshot-controller:v4.0.0
        â–ª Using image k8s.gcr.io/sig-storage/livenessprobe:v2.2.0
        â–ª Using image k8s.gcr.io/sig-storage/csi-attacher:v3.1.0
        â–ª Using image k8s.gcr.io/sig-storage/csi-snapshotter:v4.0.0
        â–ª Using image k8s.gcr.io/sig-storage/csi-provisioner:v2.1.0
        â–ª Using image k8s.gcr.io/sig-storage/csi-external-health-monitor-agent:v0.2.0
        â–ª Using image k8s.gcr.io/sig-storage/csi-external-health-monitor-controller:v0.2.0
    ğŸ”  Verifying csi-hostpath-driver addon...
    ğŸŒŸ  ì• ë“œì˜¨ í™œì„±í™” : storage-provisioner, default-storageclass, volumesnapshots, csi-hostpath-driver
    
    â—  /opt/homebrew/bin/kubectl is version 1.25.3, which may have incompatibilites with Kubernetes 1.23.1.
        â–ª Want kubectl v1.23.1? Try 'minikube kubectl -- get pods -A'
    ğŸ„  ëë‚¬ìŠµë‹ˆë‹¤! kubectlì´ "yr-demo" í´ëŸ¬ìŠ¤í„°ì™€ "default" ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
    ```
    

# Day52. ë©€í‹° ë…¸ë“œ k8s í´ëŸ¬ìŠ¤í„° êµ¬ì„± with Vagrant

### Vagrantë€?

ê°€ìƒ ë¨¸ì‹ ì˜ ë¼ì´í”„ì‚¬ì´í´ì„ ê´€ë¦¬í•˜ëŠ” CLI ìœ í‹¸ë¦¬í‹°

í™˜ê²½: MacOS m1

- https://www.youtube.com/watch?v=KvuXMMVkY1I â†’ ì‹¤íŒ¨
- VMWare Fusion 13 â†’ ì‹¤íŒ¨
- Vagrant + VritualBox Beta â†’ ì‹¤íŒ¨

# Dya53. í•¸ì¦ˆì˜¨

### Rancher

ì»¨í…Œì´ë„ˆì™€ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬, ë°°í¬ì— ìµœì í™”ëœ ë„êµ¬

### Dockerë¥¼ ì´ìš©í•œ Rancher ë°°í¬

```bash
sudo docker run -d --restart=unless-stopped -p 80:80 -p 443:443 --privileged rancher/rancher
```

```bash
docker ps                
CONTAINER ID   IMAGE                                    COMMAND                   CREATED          STATUS          PORTS                                                                                        NAMES
c6d5702c6f8d   rancher/rancher                          "entrypoint.sh"           22 seconds ago   Up 19 seconds   0.0.0.0:80->80/tcp, 0.0.0.0:443->443/tcp                                                     youthful_aryabhata
```

```bash
# Rancher ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°
docker logs  c6d5702c6f8d  2>&1 | grep "Bootstrap Password:"
```

![image](https://github.com/cloud-club/90DaysOfDevOps/assets/45191069/290ab8bd-1637-4109-9e92-3c59316c6ae4)
Rancher ë°°í¬ì˜ ì¼ë¶€ë¡œ ë¡œì»¬ K3 í´ëŸ¬ìŠ¤í„°ê°€ í”„ë¡œë¹„ì €ë‹ëœ ê²ƒë„ ë³¼ ìˆ˜ ìˆë‹¤.

> **k3s**
> 
> - ìš©ë„ : ì¿ ë²„ë„¤í‹°ìŠ¤ì™€ ì™„ì „íˆ í˜¸í™˜ë˜ëŠ” ê°€ë²¼ìš´ ë°°í¬íŒ
> - ì¥ì  : ì„¤ì¹˜ê°€ ì‰½ê³  ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ë¥¼ ì ê²Œ ì‚¬ìš©í•˜ë©´ì„œ ë†’ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ í˜¸í™˜ì„±ì„ ë³´ì¥í•¨
> - ë‹¨ì  : êµ¬ì¡°ê°€ ë§¤ìš° ë‹¨ìˆœí•˜ë¯€ë¡œ ë†’ì€ ì„±ëŠ¥ê³¼ ì•ˆì •ì„±ì„ ìš”êµ¬í•˜ëŠ” ì‹œìŠ¤í…œì—ëŠ” ë¶€ì í•©í•  ìˆ˜ ìˆìŒ


![image](https://github.com/cloud-club/90DaysOfDevOps/assets/45191069/455bcb8a-a98a-415f-984c-807fb753e179)
í•´ë‹¹ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ Rancherì—ì„œ ê´€ë¦¬ ì¤‘ì¸ í´ëŸ¬ìŠ¤í„°ì— ì•¡ì„¸ìŠ¤í•´ì•¼ í•˜ëŠ” ê²½ìš° ì„ íƒí•œ í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ kubectl ì‰˜ì„ ì—´ ìˆ˜ ìˆë‹¤.



![image](https://github.com/cloud-club/90DaysOfDevOps/assets/45191069/8ee37907-4879-4b7e-8966-3e52e6be8d5d)

Rancherê°€ ë°°í¬í•œ í´ëŸ¬ìŠ¤í„° í™•ì¸í•˜ê¸°

# Day54. k8s ì•± ë°°í¬

### nginx ì„œë¹„ìŠ¤ ë°°í¬í•˜ê¸°

ì‹¤ìŠµì—ì„œ ì£¼ì–´ì§„ ì½”ë“œë¥¼ kubectl apply ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ì—¬ ë°°í¬í•œë‹¤.

![image](https://github.com/cloud-club/90DaysOfDevOps/assets/45191069/c437d93e-ffff-472d-b51b-d5b66b1d6057)

- í™•ì¸

```bash
$ kubectl scale deployment  nginx-deployment --replicas=10 -n nginx                                  
deployment.apps/nginx-deployment scaled

$ k get rs,deploy,po,svc -n nginx -o wide                                                           
NAME                                          DESIRED   CURRENT   READY   AGE     CONTAINERS   IMAGES   SELECTOR
replicaset.apps/nginx-deployment-7f456874f4   10        10        10      2m38s   nginx        nginx    app=nginx,pod-template-hash=7f456874f4

NAME                               READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS   IMAGES   SELECTOR
deployment.apps/nginx-deployment   10/10   10           10          2m38s   nginx        nginx    app=nginx

NAME                                    READY   STATUS    RESTARTS   AGE     IP            NODE       NOMINATED NODE   READINESS GATES
pod/nginx-deployment-7f456874f4-6vmkc   1/1     Running   0          25s     10.244.0.6    minikube   <none>           <none>
pod/nginx-deployment-7f456874f4-7d2sk   1/1     Running   0          2m38s   10.244.0.5    minikube   <none>           <none>
pod/nginx-deployment-7f456874f4-bm9np   1/1     Running   0          25s     10.244.0.13   minikube   <none>           <none>
pod/nginx-deployment-7f456874f4-ht5mz   1/1     Running   0          25s     10.244.0.11   minikube   <none>           <none>
pod/nginx-deployment-7f456874f4-hx5wc   1/1     Running   0          25s     10.244.0.7    minikube   <none>           <none>
pod/nginx-deployment-7f456874f4-jqgdh   1/1     Running   0          25s     10.244.0.10   minikube   <none>           <none>
pod/nginx-deployment-7f456874f4-rc7rt   1/1     Running   0          25s     10.244.0.12   minikube   <none>           <none>
pod/nginx-deployment-7f456874f4-vrlsc   1/1     Running   0          25s     10.244.0.14   minikube   <none>           <none>
pod/nginx-deployment-7f456874f4-wfrqk   1/1     Running   0          25s     10.244.0.8    minikube   <none>           <none>
pod/nginx-deployment-7f456874f4-xx9rt   1/1     Running   0          25s     10.244.0.9    minikube   <none>           <none>

NAME                    TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE     SELECTOR
service/nginx-service   ClusterIP   10.97.235.205   <none>        80/TCP    2m38s   app=nginx-deployment
```

### ì„œë¹„ìŠ¤ expose í•˜ê¸°

**ClusterIP**Â - í‘œì‹œë˜ëŠ” IPëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ì— ìˆëŠ” í´ëŸ¬ìŠ¤í„°IPì…ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œë§Œ ì´ IPì— ì—°ê²°í•  ìˆ˜ ìˆë‹¤.

**NodePort**Â - NATë¥¼ ì‚¬ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì„ íƒí•œ ê° ë…¸ë“œì˜ ë™ì¼í•œ í¬íŠ¸ì— ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œí•œë‹¤.

**Port Forward** - ë¡œì»¬ í˜¸ìŠ¤íŠ¸ì—ì„œ ë‚´ë¶€ Kubernetes í´ëŸ¬ìŠ¤í„° í”„ë¡œì„¸ìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ê³  ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆë‹¤. ì£¼ë¡œ í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ë¥¼ ì°¾ì„ ë•Œ ì‚¬ìš©í•œë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-21 á„‹á…©á„’á…® 3.38.47.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9f25870f-f390-4f70-a124-ef604fe567f7/0d36a7fa-1757-4b4f-b880-2c53d500fa0c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-09-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.38.47.png)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-21 á„‹á…©á„’á…® 3.37.37.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9f25870f-f390-4f70-a124-ef604fe567f7/2ff5c2c4-256a-4e01-b5c3-8ee629d62352/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-09-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.37.37.png)

```bash
~/workspace/k8s Â» kubectl expose deployment nginx-deployment --name nginx-service --namespace nginx --port=80 --type=NodePort
service/nginx-service exposed

~/workspace/k8s Â» k get svc -n nginx                                                                              
NAME            TYPE       CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE
nginx-service   NodePort   10.111.83.44   <none>        80:32530/TCP   16s

minikube service nginx-service --url -n nginx                                                     
http://127.0.0.1:63829
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-21 á„‹á…©á„’á…® 3.43.46.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9f25870f-f390-4f70-a124-ef604fe567f7/b675307f-26f2-4499-a1ff-af67cccd895e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-09-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.43.46.png)

### Helm

Helmì€ Kubernetesë¥¼ ìœ„í•œ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¡œ,  Kubernetesì—ì„œ yumì´ë‚˜ aptì— í•´ë‹¹í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼í•  ìˆ˜ ìˆë‹¤.

# Day55. Stateì™€ Ingress

- Stateless : ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–¤ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ë“  ìƒê´€í•˜ì§€ ì•Šê³ , ì˜êµ¬ì ì¸ ì €ì¥ì†Œë„ í•„ìš”ë¡œ í•˜ì§€ ì•Šì€ ê²½ìš°

stateful ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ DBê°€ ì‘ë™í•˜ë ¤ë©´, hostname, ip ë“± ë³€ê²½ë˜ì§€ ì•Šì€ ê³ ìœ í•œ IDë¥¼ í†µí•´ Podë¼ë¦¬ ì—°ê²°ë˜ë„ë¡ í•´ì•¼í•œë‹¤.

### StatefulSet

deploymentëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œÂ **ìƒíƒœê°€ ì—†ëŠ”(stateless)ì•±ì„ ë°°í¬**í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì´ë‹¤.

StatefulSetì€ Deploymentì™€ ìœ ì‚¬í•˜ê²Œ, ë™ì¼í•œ ì»¨í…Œì´ë„ˆ ìŠ¤í™ì„ ê¸°ë°˜ìœ¼ë¡œ ë‘” íŒŒë“œë“¤ì„ ê´€ë¦¬í•œë‹¤.

Deploymentì™€ ì°¨ì´ì ì€ StatefulSetì€ **ê° Podì˜ ë…ìì„±ì„ ìœ ì§€í•œë‹¤ëŠ” ê²ƒ**ì´ë‹¤.

íŒŒë“œë“¤ì´ ë™ì¼í•œ ìŠ¤í™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆì§€ë§Œ, ì„œë¡œ êµì²´ëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤.

ë˜í•œ StatefulSetì€ ë™ì‹œì— ìƒì„±í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ì—†ê³ , ì„ì˜ë¡œ ì£¼ì†Œ ì§€ì •ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

ê° StatefulSet podëŠ” ëª¨ë“  ìŠ¤ì¼€ì¤„ë§ì— ê±¸ì³ ì˜êµ¬ ì‹ë³„ìë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. Podê°€ ì¬ì‹¤í–‰ë˜ì–´ë„ ì‹ë³„ìëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•œë‹¤.

> **ìƒíƒœê°€ ì—†ëŠ”**Â ì•±, ì›¹ ê°™ì€ ê²½ìš° ë””í”Œë¡œì´ë¨¼íŠ¸ë¡œ ë°°í¬í•˜ê³ Â **ìƒíƒœê°€ ìˆëŠ”**Â DBê°™ì€ ê²½ìš° ìŠ¤í…Œì´íŠ¸í’€ì…‹ìœ¼ë¡œ ë°°í¬í•œë‹¤.
> 

### k8sê°€ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•

Stateful ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•´ Pod ë¼ì´í”„ì‚¬ì´í´ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ìŠ¤í† ë¦¬ì§€ ê³„ì¸µì´ í•„ìš”í•˜ë‹¤. ì´ ìŠ¤í† ë¦¬ì§€ëŠ” ëª¨ë“  ë…¸ë“œì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼í•˜ë©°, k8s í´ëŸ¬ìŠ¤í„°ê°€ ì¶©ëŒí•˜ë”ë¼ë„ ì˜í–¥ì„ ë°›ì§€ ì•Šë„ë¡ k8s í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì— ìˆì–´ì•¼í•œë‹¤.

- PV/PVC
    - PV:  **ë³¼ë¥¨ ìì²´**ë¥¼ ë§í•œë‹¤. íŒŒë“œì™€ëŠ” ë³„ê°œë¡œ ê´€ë¦¬ë˜ë©° ë³„ë„ì˜ ìƒëª… ì£¼ê¸°ê°€ ì¡´ì¬í•œë‹¤.
    - PVC: **ì‚¬ìš©ìê°€ PVì— í•˜ëŠ” ìš”ì²­ì´ë‹¤.**
    - ì¿ ë²„ë„¤í‹°ìŠ¤ ë³¼ë¥¨ì„ íŒŒë“œì— ì§ì ‘ í• ë‹¹í•˜ëŠ” ë°©ì‹ì´ ì•„ë‹ˆë¼ ì¤‘ê°„ì— PVCë¥¼ ë‘ì–´ íŒŒë“œì™€ íŒŒë“œê°€ ì‚¬ìš©í•  ìŠ¤í† ë¦¬ì§€ë¥¼ ë¶„ë¦¬í•˜ì—¬, íŒŒë“œ ê°ê°ì˜ ìƒí™©ì— ë§ê²Œ ë‹¤ì–‘í•œ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.
- StorageClass
    
    **ë™ì **Â **í”„ë¡œë¹„ì €ë‹(Dynamic provisioning)**
    
    ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ì‚¬ìš©í•˜ë©´Â PVê°ì²´ë¥¼ ìƒì„±í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.Â ëŒ€ì‹ ì—,Â PVCë¥¼ ìƒì„±í•  ë•Œ ë‚´ë¶€ì ìœ¼ë¡œ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.Â KubernetesëŠ” Storage Classë¼ëŠ” ë‹¤ë¥¸ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    
    Storage ClassëŠ” ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©ë˜ëŠ” ë°±ì—”ë“œ ì˜êµ¬ ìŠ¤í† ë¦¬ì§€(ì˜ˆ: Amazon EFS íŒŒì¼ ìŠ¤í† ë¦¬ì§€, Amazon EBS ë¸”ë¡ ìŠ¤í† ë¦¬ì§€ ë“±)ì˜ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ëŠ” ì¶”ìƒí™”ì…ë‹ˆë‹¤.
    
    Storage ClassÂ ê¸°ë³¸ì ìœ¼ë¡œ ë‘ ê°€ì§€ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
    
    1. **ì´ë¦„(Name)**: ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤ ê°ì²´ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.
    2. **ì œê³µì(Provisioner)**: ì—°ê²°ë˜ëŠ” ìŠ¤í† ë¦¬ì§€ ê¸°ìˆ ì„ ì •ì˜í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, provisionerëŠ” Amazon EFSìš©Â efs.csi.aws.comÂ ë˜ëŠ” Amazon EBSìš© ebs.csi.aws.comì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Ingress

(ì¶œì²˜: https://blog.naver.com/alice_k106/221502890249)

ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ IngressëŠ” ì™¸ë¶€ì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ë¡œ ë“¤ì–´ì˜¤ëŠ” ë„¤íŠ¸ì›Œí¬ ìš”ì²­ : ì¦‰, Ingress íŠ¸ë˜í”½ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€ ì •ì˜í•œë‹¤. ì‰½ê²Œ ë§í•˜ìë©´, IngressëŠ” ì™¸ë¶€ì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Deploymentì™€ Serviceì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ, ì¼ì¢…ì˜ ê´€ë¬¸ (Gateway) ê°™ì€ ì—­í• ì„ ë‹´ë‹¹í•œë‹¤. Ingressë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ, ì™¸ë¶€ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì„ íƒì§€ëŠ” **NodePort, ExternalIP ë“±ì´ ìˆì„ ìˆ˜ ìˆê² ë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ë°©ë²•ë“¤ì€ ì¼ë°˜ì ìœ¼ë¡œ Layer 4 (TCP, UDP) ì—ì„œì˜ ìš”ì²­ì„ ì²˜ë¦¬**í•˜ë©°, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì— ëŒ€í•œ ì„¸ë¶€ì ì¸ ì²˜ë¦¬ ë¡œì§ì„ êµ¬í˜„í•˜ê¸°ëŠ” ì•„ë¬´ë˜ë„ í•œê³„ê°€ ìˆë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ **IngressëŠ” Layer 7ì—ì„œì˜ ìš”ì²­ì„ ì²˜ë¦¬**í•  ìˆ˜ ìˆë‹¤. ì˜ˆì»¨ëŒ€, ì™¸ë¶€ë¡œë¶€í„° ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì— ëŒ€í•œ ë¡œë“œ ë°¸ëŸ°ì‹±, TLS/SSL ì¸ì¦ì„œ ì²˜ë¦¬, íŠ¹ì • HTTP ê²½ë¡œì˜ ë¼ìš°íŒ… ë“±ì„ Ingressë¥¼ í†µí•´ ìì„¸í•˜ê²Œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

- pacman ì„œë¹„ìŠ¤ì— ingress êµ¬ì„±í•˜ê¸°
    - ingressë¥¼ í™œì„±í™”í•˜ê¸°
        
        ```bash
        $ minikube addons enable ingress                                                                    
        ğŸ’¡  ingress is an addon maintained by Kubernetes. For any concerns contact minikube on GitHub.
        You can view the list of minikube maintainers at: https://github.com/kubernetes/minikube/blob/master/OWNERS
        ğŸ’¡  After the addon is enabled, please run "minikube tunnel" and your ingress resources would be available at "127.0.0.1"
            â–ª Using image registry.k8s.io/ingress-nginx/controller:v1.7.0
            â–ª Using image registry.k8s.io/ingress-nginx/kube-webhook-certgen:v20230312-helm-chart-4.5.2-28-g66a760794
            â–ª Using image registry.k8s.io/ingress-nginx/kube-webhook-certgen:v20230312-helm-chart-4.5.2-28-g66a760794
        ğŸ”  Verifying ingress addon...
        ğŸŒŸ  'ingress' ì• ë“œì˜¨ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤
        ```
        
    - [pacman-ingress.yaml](https://github.com/MichaelCade/90DaysOfDevOps/blob/main/2022/Days/Kubernetes) ì ìš©
        
        ```bash
        $ k apply -f pacmon-ingress.yaml                                                                     
        ingress.networking.k8s.io/pacman-ingress created
        ```
        
    - ingress ìƒì„± í™•ì¸
        
        ```bash
        $ kubectl get ingress -n pacman                                                                      
        NAME             CLASS    HOSTS        ADDRESS        PORTS   AGE
        pacman-ingress   <none>   pacman.com   192.168.49.2   80      3m12s
        ```
        
    - minikubeë¥¼ í™œìš©í•˜ê¸°ë•Œë¬¸ì— `minikube tunnel` ëª…ë ¹ì„ ì ìš©í•œë‹¤.
        
        ```bash
        $ minikube tunnel 
        âœ…  Tunnel successfully started
        
        ğŸ“Œ  NOTE: Please do not close this terminal as this process must stay alive for the tunnel to be accessible ...
        
        â—  The service/ingress pacman requires privileged ports to be exposed: [80]
        ğŸ”‘  sudo permission will be asked for it.
        ğŸƒ  pacman ì„œë¹„ìŠ¤ì˜ í„°ë„ì„ ì‹œì‘í•˜ëŠ” ì¤‘
        â—  The service/ingress pacman-ingress requires privileged ports to be exposed: [80 443]
        ğŸ”‘  sudo permission will be asked for it.
        ğŸƒ  pacman-ingress ì„œë¹„ìŠ¤ì˜ í„°ë„ì„ ì‹œì‘í•˜ëŠ” ì¤‘
        ```
        
       ![image](https://github.com/cloud-club/90DaysOfDevOps/assets/45191069/9eb90608-780a-4b3d-876c-5765024157ad)


> **minikube tunnel**
> 
> - í´ëŸ¬ìŠ¤í„°ì˜ IP ì£¼ì†Œë¥¼ ê²Œì´íŠ¸ì›¨ì´ë¡œ ì‚¬ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ì˜ ì„œë¹„ìŠ¤ CIDRì— ëŒ€í•œ í˜¸ìŠ¤íŠ¸ì˜
> ë„¤íŠ¸ì›Œí¬ ê²½ë¡œë¥¼ ìƒì„±í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
> - Minikubeë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ Kubernetes í´ëŸ¬ìŠ¤í„°ì˜ ì„œë¹„ìŠ¤ë¥¼ ë¡œì»¬ ë¨¸ì‹ ìœ¼ë¡œ ë…¸ì¶œì‹œì¼œì£¼ëŠ” ë„êµ¬

### ë§í¬

**Day49**

- [Kubernetes Documentation](https://kubernetes.io/docs/home/)

**Day50**

- [Kubernetes playground â€“ How to choose your platform](https://vzilla.co.uk/vzilla-blog/building-the-home-lab-kubernetes-playground-part-1)
- [Kubernetes playground â€“ Setting up your cluster](https://vzilla.co.uk/vzilla-blog/building-the-home-lab-kubernetes-playground-part-2)
- [Getting started with Amazon Elastic Kubernetes Service (Amazon EKS)](https://vzilla.co.uk/vzilla-blog/getting-started-with-amazon-elastic-kubernetes-service-amazon-eks)
- [Getting started with Microsoft Azure Kubernetes Service (AKS)](https://vzilla.co.uk/vzilla-blog/getting-started-with-microsoft-azure-kubernetes-service-aks)
- [Getting Started with Microsoft AKS â€“ Azure PowerShell Edition](https://vzilla.co.uk/vzilla-blog/getting-started-with-microsoft-aks-azure-powershell-edition)
- [Getting started with Google Kubernetes Service (GKE)](https://vzilla.co.uk/vzilla-blog/getting-started-with-google-kubernetes-service-gke)
- [Kubernetes, How to â€“ AWS Bottlerocket + Amazon EKS](https://vzilla.co.uk/vzilla-blog/kubernetes-how-to-aws-bottlerocket-amazon-eks)
- [Getting started with CIVO Cloud](https://vzilla.co.uk/vzilla-blog/getting-started-with-civo-cloud)
- [Minikube - Kubernetes Demo Environment For Everyone](https://vzilla.co.uk/vzilla-blog/project_pace-kasten-k10-demo-environment-for-everyone)

**Day51**

- minikube ì´ìš©í•œ í”„ë¡œì íŠ¸
    - [Project Pace](https://github.com/MichaelCade/project_pace)

**Day54**

- minikube ì„œë¹„ìŠ¤
    - https://minikube.sigs.k8s.io/docs/commands/service/

**Day55**

- 100DaysOfKubernetes
    - https://100daysofkubernetes.io/overview.html
